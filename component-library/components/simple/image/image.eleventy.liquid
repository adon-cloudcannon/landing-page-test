{% assign classes = "" %}

{% assign desktop_styles = "" %}
{% assign tablet_styles = "" %}
{% assign mobile_styles = "" %}


{% assign desktop_styles = desktop_styles | render_transform: styles, 'desktop' %}
{% assign tablet_styles = tablet_styles | render_transform: styles, 'tablet' %}
{% assign mobile_styles = mobile_styles | render_transform: styles, 'mobile' %}

{% assign desktop_styles = desktop_styles | render_margin: styles, 'desktop' %}
{% assign tablet_styles = tablet_styles | render_margin: styles, 'tablet' %}
{% assign mobile_styles = mobile_styles | render_margin: styles, 'mobile' %}

{% assign desktop_styles = desktop_styles | render_position: styles, 'desktop' %}
{% assign tablet_styles = tablet_styles | render_position: styles, 'tablet' %}
{% assign mobile_styles = mobile_styles | render_position: styles, 'mobile' %}

{% assign desktop_styles = desktop_styles | render_block_alignment: styles, 'desktop' %}
{% assign tablet_styles = tablet_styles | render_block_alignment: styles, 'tablet' %}
{% assign mobile_styles = mobile_styles | render_block_alignment: styles, 'mobile' %}

{% if styles.ontop %}
	{% assign classes = classes | append: " z-10" %}
{% endif %}

{% if styles.rounded %}
	{% assign classes = classes | append: " rounded-2xl" %}
{% endif %}

{% if styles.border %}
	{% assign classes = classes | append: " border" %}
{% endif %}

{% assign container_name = "image" | UUID %}

<style>
	@media (min-width: 1280px) {
		.{{ container_name}} {
			{{ desktop_styles }}
		}
	}

	@media (min-width: 768px) and (max-width: 1279px) {
		.{{ container_name}} {
			{{ tablet_styles }}
		}
	}

	@media (max-width: 767px) {
		.{{ container_name}} {
			{{ mobile_styles }}
		}
	}
</style>

{% if content.image contains 'res.cloudinary.com' %}
	<picture class="w-full">
		<source media="(min-width: 1280px)" srcset="{{ content.image | image_resize: '2432' }} 2x, {{ content.image | image_resize: '1216' }} 1x">
		<source media="(min-width: 1000px)" srcset="{{ content.image | image_resize: '2000' }} 2x, {{ content.image | image_resize: '1000' }} 1x">
		<source media="(min-width: 740px)" srcset="{{ content.image | image_resize: '1480' }} 2x, {{ content.image | image_resize: '740' }} 1x">
		<source media="(min-width: 500px)" srcset="{{ content.image | image_resize: '1000' }} 2x, {{ content.image | image_resize: '500' }} 1x">
		<img src="{{ content.image | image_resize: '500' }}" alt="{{ content.alt }}" class="relative w-full {{ classes }} {{ container_name }}">
	</picture>
{% else %}
	<img src="{{ content.image }}" alt="{{ content.alt }}" class="relative w-full {{ classes }} {{ container_name }}">
{% endif %}
